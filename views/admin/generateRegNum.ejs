<%- include('../partials/messages.ejs'); %>
  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <%- include('../partials/sideMenuAdmin.ejs'); %>

      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

          <!-- Topbar -->
          <%- include('../partials/top_nav.ejs'); %>

            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid">

              <!-- Page Heading -->
              <div class="card shadow mb-4">

                <div class="card-body mt-5">
                  <div class="table-responsive">

                    <!-- Main Content -->
                    <div class="container mt-5">
                        <h1>Generate Token</h1>
                        <% if (token) { %>
                            <div class="alert alert-success" role="alert">
                                Your generated registration token: <span id="tokenText"><%= token %></span>
                                <button id="copyButton" class="btn btn-sm btn-primary ml-2">Copy</button>
                              </div>
                              
                              <script>
                                $(document).ready(function () {
                                  const copyButton = $("#copyButton");
                                  const tokenText = $("#tokenText");
                              
                                  copyButton.on("click", function () {
                                    const token = tokenText.text();
                                    copyToClipboard(token);
                                    showCopyFeedback();
                                  });
                              
                                  function copyToClipboard(text) {
                                    const tempInput = $("<input>");
                                    $("body").append(tempInput);
                                    tempInput.val(text).select();
                                    document.execCommand("copy");
                                    tempInput.remove();
                                  }
                              
                                  function showCopyFeedback() {
                                    const feedbackElement = $("<div class='alert alert-success mt-2' role='alert'>Token copied to clipboard!</div>");
                                    feedbackElement.insertAfter(copyButton);
                                    setTimeout(function () {
                                      feedbackElement.fadeOut("slow", function () {
                                        $(this).remove();
                                      });
                                    }, 2000); // Display the feedback for 2 seconds
                                  }
                                });
                              </script>
                              
                              
                        <% } %>
                        <form action="/store" method="POST">
                          <div class="form-group">
                            <label for="name">Your Name:</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                          </div>
                          <button type="submit" class="btn btn-primary">Generate Token</button>
                        </form>
                      </div>
                        <!-- End of Main Content -->
                  </div>
                </div>
              </div>

            </div>
            <!-- End of Content Wrapper -->

        </div>
        <!-- End of Page Wrapper -->

        <!-- Scroll to Top Button-->
        <a class="scroll-to-top rounded" href="#page-top">
          <i class="fas fa-angle-up"></i>
        </a>